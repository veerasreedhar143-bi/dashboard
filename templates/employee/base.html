{% load static %}
<!doctype html>
<html lang="en">
<head>
<title>DASHBOARD</title>

<link rel="stylesheet" href="{% static 'stylesheets/employee.css' %}">
<link rel="stylesheet" href="{% static 'stylesheets/attendance.css' %}">
<link rel="stylesheet" href="{% static 'stylesheets/employee_list.css' %}">
<link rel="stylesheet" href="{% static 'stylesheets/add_edit_employee.css' %}">
<link rel="stylesheet" href="{% static 'stylesheets/employee_profile.css' %}">


<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"/>
<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Segoe UI, sans-serif;
}

/* ===== HEADER ===== */
.header{
position:fixed;
width:100%;
height:60px;
background:#be95be;
display:flex;
align-items:center;
justify-content:center;
color:white;
z-index:999;
}

/* ===== SIDEBAR ===== */
.sidebar{
width:220px;
background:#f4f4f4;
position:fixed;
top:60px;
height:100vh;
padding:20px;
box-shadow:3px 0 12px rgba(0,0,0,0.08);
}

.sidebar h2{
text-align:center;
margin-bottom:25px;
}

.sidebar a{
display:block;
padding:14px;
margin-bottom:10px;
color:#333;
text-decoration:none;
border-radius:8px;
transition:0.3s;
position:relative;
}

.sidebar a:hover{
background:#790808;
color:white;
}

.sidebar a.active{
background:#790808;
color:white;
}

.sidebar a i{
margin-right:10px;
}

/* ===== MAIN ===== */
.main{
margin-left:220px;
margin-top:60px;
min-height:calc(100vh - 60px);
padding-top:60px;   /* ADD THIS */

}

/* ===== PRO DROPDOWN ===== */

.emp-dropdown{
max-height:0;
overflow:hidden;
padding-left:15px;
transition:max-height .35s ease;
}

.emp-dropdown.open{
max-height:300px;
}

.emp-dropdown a{
background:#e9e9e9;
font-size:14px;
margin-bottom:6px;
padding:10px;
border-radius:6px;
transition:0.3s;
}

.emp-dropdown a:hover{
background:#be95be;
color:white;
transform:translateX(5px);
}

/* ===== ARROW ROTATION ===== */
.rotate{
transition:0.3s;
}

.rotate.open{
transform:rotate(180deg);
}

</style>
</head>

<body>

<div class="header">
<h2>silicon access</h2>
</div>

<div class="sidebar">

<h2>HRMS</h2>

<a href="#"><i class="fas fa-home"></i>Dashboard</a>

<!-- EMPLOYEE DROPDOWN -->
<a href="/e/employee/" id="empToggle">
<i class="fas fa-user"></i>Employees
<i class="fas fa-chevron-down rotate" id="arrowIcon" style="float:right;"></i>
</a>

<div class="emp-dropdown" id="empDropdown">
<a href="/e/employee_list/">Employee List</a>
<a href="/e/add_edit_employee/">Add/Edit Employee</a>
<a href="#">Employee Profile</a>
</div>

<a href="/a/attendance/"><i class="fas fa-calendar-check"></i>Attendance</a>
<a href="#"><i class="fas fa-leaf"></i>Leaves</a>
<a href="#"><i class="fas fa-money-bill-wave"></i>Payroll</a>
<a href="#"><i class="fas fa-chart-line"></i>Reports</a>
<a href="#"><i class="fas fa-cog"></i>Settings</a>
<a href="#"><i class="fas fa-sign-out-alt"></i>Logout</a>

</div>

<div class="main">
<h2>Dashboard</h2>
<p>Main content goes here</p>
</div>

<script>
     const links = document.querySelectorAll(".sidebar a");
     function loadPage(page) {
       fetch(page)
         .then((response) => response.text())
         .then((data) => {
           document.querySelector(".main").innerHTML = data;
         });
     }

     links[1].onclick = function (event) {
       event.preventDefault();
       loadPage("/e/employee/");
     };
     links[2].onclick = function (event){
       event.preventDefault();
       loadPage("/e/employee_list/");
     }
     links[3].onclick = function (event){
       event.preventDefault();
       loadPage("/e/add_edit_employee/");
     }
    links[4].onclick = function (event){
      event.preventDefault();
      loadPage("/e/employee_profile/");
    }

     links[5].onclick = function (event) {
       event.preventDefault();
       loadPage("/a/attendance/");
     };
     links[6].onclick = function (event) {
       event.preventDefault();
       loadPage("leaves.html");
     };

     // ===== EMPLOYEE DROPDOWN TOGGLE =====
const empToggle = document.getElementById("empToggle");
const empDropdown = document.getElementById("empDropdown");
const arrowIcon = document.getElementById("arrowIcon");

empToggle.addEventListener("click", function(e){
  e.preventDefault();

  empDropdown.classList.toggle("open");
  arrowIcon.classList.toggle("open");
});

// ===== EMPLOYEE PROFILE AJAX =====
document.addEventListener("click", function(e){

if(e.target.classList.contains("emp-name")){

  const id = e.target.dataset.id;

  fetch(`/e/profile_details/${id}/`)
  .then(res => res.text())
  .then(html=>{
      const panel = document.querySelector("#profileView");
      if(panel){
          panel.innerHTML = html;
      }
  });

}

});


   </script>


</body>
</html>
